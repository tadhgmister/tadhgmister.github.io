<!DOCTYPE html>
<html lang="en">
<head>
  <script type="module" src="v2.js" onload="import(this.src).then(module=>module.initGame())"></script>
  <meta charset="UTF-8">
  <meta name="color-scheme" content="light dark">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Colour Sort Game</title>
  <link rel="stylesheet" href="coloursort-grid.css">
</head>
<body>
  <h1>Colour Sort Game</h1>
  <p id="instructions"> 
    the goal of the game is to sort the bubbles so each vial only contains a single colour.
    Clicking on a vial will move the top bubbles to another vial with the same colour at the top or an empty vial if no partially full vials are available.
    Note that pressing the reset button can be undone.
    With the current implementation you are given a random level every time you refresh the page, it is not known whether the level presented will be solvable.
  </p>

  <aside id="controls"></aside>
  <main id="game"></main>

  <form id="settingsForm" method="GET" action="./index.html">
    <p>
      <input type="checkbox" id="disableFog" name="disableFog" value="yes">
      <label for="disableFog">disable fog</label>
    </p>
    <p>
      <input type="submit" value="New game with the following settings">
    </p>
    <p>
      <label for="colours">tubes to fill with colours</label>
      <input type="number" id="colours" name="nColors" min="2" max="37" step="1" value="8">
    </p>
    <p>
      <label for="ballsPerColour">balls per tube</label>
      <input type="number" id="ballsPerColour" name="ballsPerColor" min="2" step="1" value="4" onchange="for(let id of ['emptyTubeSize', 'fullTubeGapBonus'].values()){document.getElementById(id).setAttribute('max', (this.value)-1)}">
    </p>
    <p>
      <label for="emptyTubes">empty tubes</label>
      <input type="number" id="emptyTubes" name="empties" min="0" step="1" value="2">
    </p>
    <p>
      <label for="emptyTubeSize">less capacity in empty tubes</label>
      <input type="number" id="emptyTubeSize" name="emptyPenalty" min="0" step="1" value="0">
    </p>
    <p>
      <label for="fullTubeGapBonus">more capacity in full tubes</label>
      <input type="number" id="fullTubeGapBonus" name="extraSlack" min="0" step="1" value="0">
    </p>
    <input type="reset" value="reset to default settings">
</form>
<section id="presets">
  <ul>
    <li><a href="index.html">
      Default settings
    </a></li>
    <li><a href="?nColors=10&ballsPerColor=3&empties=1&emptyPenalty=1&extraSlack=2">
      Short and sweet
    </a></li>
    <li><a href="?nColors=10&ballsPerColor=5">
      A bit harder
    </a></li>
    <li><a href="?nColors=5&ballsPerColor=10">
      Excavation
    </a></li>
    <li><a href="?nColors=12&ballsPerColor=8">
      Marathon
    </a></li>
    <li><a href="?disableFog=yes&nColors=37&ballsPerColor=2&empties=3">
      <q>A word search counts as a puzzle right?</q>
    </a></li>
    <li><a href="?disableFog=yes&levelCode=4PFDD,4PIOF,4JDBI,4BEMO,4BBLC,4AIOO,4KMFG,4PHEE,4DNGH,4AGFG,4NJKA,4IPNC,4ALCK,4JJKN,4LLMM,4HECH,4,4">
      The level that broke Tadhg and lead him to make this app
    </a></li>
    <!-- <li><a href="?">
      TEMPLATE
    </a></li> -->
    <li><a href="?nColors=4&ballsPerColor=20&empties=20&emptyPenalty=19">
      The least fun combo I could imagine. (that is solvable)
    </a></li>
    <li><a href="?disableFog=yes&levelCode=4AEEB,4AFFB,4AGGB,4AHHB,4CEED,4CFFD,4CGGD,4CHHD,4,4">
        literally impossible
    </a></li>
  </ul>
</section>

</body>
</html>
